<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
</head>

<body>
    <div id="container">
        <div id="container">
            <h1 id="result">คุณได้ของ
                <hr>
            </h1>
            <div>
                <img id="pictureUrl">
                <p id="displayName"><b>displayName:</b></p>
                <p id="statusMessage"><b>statusMessage:</b></p>
                <button id="btnLogOut" onclick="logOut()">Log Out</button>
            </div>
            <button onclick="moveToChat()">กลับไปหน้าหลัก</button>
        </div>
    </div>
    <script src="https://static.line-scdn.net/liff/edge/versions/2.21.0/sdk.js"></script>
    <script>
        async function main() {
            await liff.init({ liffId: "1661306848-p5lolXm3" });
            if (!liff.isLoggedIn()) {
                const destinationUrl = window.location.href;
                liff.login({ redirectUri: destinationUrl });
            }
            getUserProfile()
            const urlParams = new URLSearchParams(window.location.search);
            console.log(urlParams.get('param'))
            if (urlParams.get('param') === "100") {
                document.querySelector('#result').append("แท้จ้า");
            } else {
                document.querySelector('#result').append("ปลอมจ้า");
            }
            liff.closeWindow();
        }

        async function moveToChat() {
            window.location.href = 'https://lin.ee/a3xVDup';
        }
        async function getUserProfile() {
            const profile = await liff.getProfile()
            document.getElementById("pictureUrl").src = profile.pictureUrl
            document.getElementById("displayName").append(profile.displayName)
            document.getElementById("statusMessage").append(profile.statusMessage)
        }
        async function logOut() {
            liff.logout()
            window.location.reload()
        }
        main()
    </script>
</body>

</html>